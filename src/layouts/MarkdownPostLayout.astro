---
import Layout from "./Layout.astro";
const { frontmatter } = Astro.props;

// Format date more elegantly
const formatDate = (date: string) => {
  return new Date(date).toLocaleDateString("en-US", {
    year: "numeric",
    month: "long",
    day: "numeric",
  });
};
---

<Layout title={frontmatter.title}>
  <article
    class="max-w-prose mx-auto px-4 py-8 md:px-0 font-system leading-relaxed text-gray-900"
  >
    <header class="mb-12">
      <h1 class="text-4xl md:text-5xl font-bold leading-tight mb-4 text-black">
        {frontmatter.title}
      </h1>
      <div
        class="flex flex-col md:flex-row md:items-center gap-2 md:gap-4 text-sm text-gray-600 mt-2"
      >
        <time class="font-medium">{formatDate(frontmatter.pubDate)}</time>
        <span
          class="relative md:before:content-['â€¢'] md:before:mr-4 md:before:text-gray-300"
        >
          by {frontmatter.author}
        </span>
      </div>
    </header>

    {
      frontmatter.image && (
        <figure class="my-12 text-center">
          <img
            src={frontmatter.image.url}
            alt={frontmatter.image.alt}
            loading="lazy"
            class="max-w-full h-auto border border-gray-200 shadow-lg"
          />
        </figure>
      )
    }

    {
      frontmatter.description && (
        <div class="my-8 py-6 border-t border-b border-gray-200">
          <p class="text-lg italic text-gray-600 text-center m-0">
            {frontmatter.description}
          </p>
        </div>
      )
    }

    <div class="mt-12 prose prose-lg prose-gray max-w-none">
      <slot />
    </div>
  </article>
</Layout>

<style>
  .font-system {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui,
      sans-serif;
  }

  /* Custom prose styles for content */
  .prose :global(h1),
  .prose :global(h2),
  .prose :global(h3),
  .prose :global(h4),
  .prose :global(h5),
  .prose :global(h6) {
    @apply text-black font-semibold my-8 leading-snug;
  }

  .prose :global(h2) {
    @apply text-3xl;
  }

  .prose :global(h3) {
    @apply text-xl;
  }

  .prose :global(p) {
    @apply my-6 text-gray-700;
  }

  .prose :global(a) {
    @apply text-black underline decoration-1 underline-offset-2 hover:decoration-2;
  }

  .prose :global(blockquote) {
    @apply my-8 pl-8 border-l-4 border-black italic text-gray-600;
  }

  .prose :global(code) {
    @apply bg-gray-100 px-2 py-1 rounded text-sm font-mono;
  }

  .prose :global(pre) {
    @apply bg-gray-50 p-6 rounded-md overflow-x-auto my-8 border border-gray-200;
  }

  .prose :global(pre code) {
    @apply bg-transparent p-0;
  }
</style>
